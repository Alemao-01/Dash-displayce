<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard de Performance - Campanhas</title>

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css">

    <!-- Leaflet MarkerCluster CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css">

    <!-- External Stylesheet -->
    <link rel="stylesheet" href="styles.css">

    <!-- Leaflet JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>

    <!-- Leaflet MarkerCluster JS -->
    <script src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js"></script>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
</head>

<body>
    <!-- NAVBAR E-M√çDIAS -->
    <nav class="navbar">
        <img src="assets/logo-horizontal.png" alt="E-M√≠dias" class="navbar-logo">
    </nav>

    <div class="container">
        <header>
            <div class="header-top">
                <h1>üìä Dashboard de Performance</h1>
                <button id="logoutBtn" class="btn-logout">Sair</button>
            </div>
            <p>An√°lise de Campanhas - Impress√µes, Investimento e Geolocaliza√ß√£o</p>

            <div class="campaign-selector-container">
                <label for="campaignSelect">Campanha:</label>
                <select id="campaignSelect">
                    <option value="">Carregando campanhas...</option>
                </select>
                <button id="refreshBtn" class="btn-refresh" title="Atualizar dados">üîÑ</button>
            </div>
        </header>

        <div id="loading" class="loading">Carregando dados...</div>

        <!-- Empty State -->
        <div id="emptyState" class="empty-state hidden">
            <div class="empty-icon">üìä</div>
            <h2>Nenhum dado dispon√≠vel</h2>
            <p>Esta campanha ainda n√£o possui dados de performance.</p>
            <button class="btn-refresh-empty" data-action="refresh">üîÑ Sincronizar Dados</button>
        </div>

        <div id="error" class="error hidden"></div>

        <div id="content" class="hidden">
            <!-- HERO STATS - NOVO LAYOUT -->
            <div class="hero-stats">
                <h2 class="hero-title">Dashboard de Performance - Campanha Atual</h2>
                <div class="hero-metrics">
                    <div class="hero-stat">
                        <div class="hero-icon">üí∞</div>
                        <div class="hero-info">
                            <span class="hero-value" id="heroCost">R$ 0,00</span>
                            <span class="hero-label">Investimento Total</span>
                        </div>
                    </div>
                    <div class="hero-stat">
                        <div class="hero-icon">üìä</div>
                        <div class="hero-info">
                            <span class="hero-value" id="heroImpressions">0</span>
                            <span class="hero-label">Impress√µes Totais</span>
                        </div>
                    </div>
                    <div class="hero-stat">
                        <div class="hero-icon">üì∫</div>
                        <div class="hero-info">
                            <span class="hero-value" id="heroScreens">0</span>
                            <span class="hero-label">Telas Ativas</span>
                        </div>
                    </div>
                    <div class="hero-stat">
                        <div class="hero-icon">‚ñ∂Ô∏è</div>
                        <div class="hero-info">
                            <span class="hero-value" id="heroPlays">0</span>
                            <span class="hero-label">Total de Exibi√ß√µes</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- M√©tricas Principais -->
            <div class="metrics-grid">
                <div class="metric-card cost">
                    <div class="metric-label">üí∞ Investimento Total</div>
                    <div class="metric-value" id="totalCost">R$ 0.00</div>
                    <div class="metric-subtext">Custo l√≠quido de campanhas</div>
                </div>
                <div class="metric-card impressions">
                    <div class="metric-label">üëÅÔ∏è Impress√µes Totais</div>
                    <div class="metric-value" id="totalImpressions">0</div>
                    <div class="metric-subtext">Visualiza√ß√µes em telas</div>
                </div>
                <div class="metric-card plays">
                    <div class="metric-label">‚ñ∂Ô∏è Total de Plays</div>
                    <div class="metric-value" id="totalPlays">0</div>
                    <div class="metric-subtext">Exibi√ß√µes totais</div>
                </div>
                <div class="metric-card screens">
                    <div class="metric-label">üñ•Ô∏è Telas Ativas</div>
                    <div class="metric-value" id="totalScreens">0</div>
                    <div class="metric-subtext">Pontos de exibi√ß√£o √∫nicos</div>
                </div>
                <div class="metric-card cities">
                    <div class="metric-label">üèôÔ∏è Cidades</div>
                    <div class="metric-value" id="totalCities">0</div>
                    <div class="metric-subtext">Cidades no plano</div>
                </div>
                <div class="metric-card countries">
                    <div class="metric-label">üåç Pa√≠ses</div>
                    <div class="metric-value" id="totalCountries">0</div>
                    <div class="metric-subtext">Pa√≠ses no plano</div>
                </div>
            </div>

            <!-- Gr√°ficos -->
            <div class="charts-grid">
                <!-- Mapa de Localiza√ß√µes -->
                <div class="map-container full-width">
                    <h2>üó∫Ô∏è Mapa de Telas - Geolocaliza√ß√£o</h2>
                    <div id="map"></div>
                    <div class="geo-stats">
                        <div class="geo-stat">
                            <div class="geo-stat-label">Cidades Cobertas</div>
                            <div class="geo-stat-value" id="mapCities">-</div>
                        </div>
                        <div class="geo-stat">
                            <div class="geo-stat-label">Pa√≠ses Cobertos</div>
                            <div class="geo-stat-value" id="mapCountries">-</div>
                        </div>
                        <div class="geo-stat">
                            <div class="geo-stat-label">Impress√µes M√©dias por Tela</div>
                            <div class="geo-stat-value" id="avgImpressions">-</div>
                        </div>
                        <div class="geo-stat">
                            <div class="geo-stat-label">Custo M√©dio por Tela</div>
                            <div class="geo-stat-value" id="avgCost">-</div>
                        </div>
                    </div>
                </div>

                <!-- Gr√°fico Unificado - Impress√µes e Investimento -->
                <div class="chart-card full-width">
                    <h2>üìà Performance Di√°ria - Impress√µes e Investimento</h2>
                    <div class="chart-container">
                        <canvas id="dailyUnifiedChart"></canvas>
                    </div>
                </div>

                <!-- Gr√°fico Impress√µes por Cidade/Pa√≠s -->
                <div class="chart-card">
                    <div class="chart-header">
                        <h2>üìä Impress√µes Geogr√°ficas</h2>
                        <div class="chart-toggles">
                            <button class="toggle-btn active" data-chart="impressions" data-view="city">Por
                                Cidade</button>
                            <button class="toggle-btn" data-chart="impressions" data-view="country">Por Pa√≠s</button>
                        </div>
                    </div>
                    <div class="chart-container small">
                        <canvas id="impressionsGeoChart"></canvas>
                    </div>
                </div>

                <!-- Gr√°fico Investimento por Cidade/Pa√≠s -->
                <div class="chart-card">
                    <div class="chart-header">
                        <h2>üí∞ Investimento Geogr√°fico</h2>
                        <div class="chart-toggles">
                            <button class="toggle-btn active" data-chart="investment" data-view="city">Por
                                Cidade</button>
                            <button class="toggle-btn" data-chart="investment" data-view="country">Por Pa√≠s</button>
                        </div>
                    </div>
                    <div class="chart-container small">
                        <canvas id="investmentGeoChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <div class="footer-brand">
                <img src="assets/logo-horizontal.png" alt="E-M√≠dias" class="footer-logo">
            </div>
            <p>Dashboard E-M√≠dias ‚Ä¢ Tecnologia em publicidade</p>
            <p class="update-time-text">Atualizado em: <span id="updateTime"></span></p>
        </footer>
    </div>

    <script src="script.js"></script>
</body>

</html>